<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.dnlab.domain.toDo.repository.ToDoMapper">

    <!-- 할 일 추가 -->
    <insert id="createToDo">
        INSERT INTO TODO(content, user_num,week_start_date)
        VALUES (#{content}, #{user_num}, #{week_start_date})
    </insert>

    <!-- 금주의 할 일 불러오기 -->
    <select id="viewThisWeekToDo" resultType="com.example.dnlab.domain.toDo.entity.ToDo">
        select * from todo where user_num = #{user_num} and week_start_date = #{week_start_date};
    </select>

    <delete id="deleteTodo">
        delete  from todo where num = #{num};
    </delete>

    <update id="updateContent" parameterType="map">
        UPDATE todo SET content = #{content} WHERE num = #{num}
    </update>

    <!-- 금주의 할 일 전원 불러오기 -->
    <select id="viewThisWeekAllToDo" resultType="com.example.dnlab.domain.toDo.entity.ToDo">
        SELECT t.*, u.name
        FROM todo t
                 JOIN user u ON t.user_num = u.num
        WHERE t.week_start_date = #{week_start_date};
    </select>

</mapper>